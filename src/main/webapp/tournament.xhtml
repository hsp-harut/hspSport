<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:of="http://omnifaces.org/functions"
                xmlns:sec="http://www.springframework.org/security"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/WEB-INF/template.xhtml">
  
<ui:define name="subheader">
	<h:outputLink value="#{request.contextPath}/tournament" styleClass="BoldGray">
		<h:outputText value=" #{bundle['tournaments']}"/>
	</h:outputLink>        
</ui:define>
    
<ui:define name="content">
  
    
<f:loadBundle id="bundle" var="bundle" basename="#{tournamentController.currentBundle}"/>






<h:form id="tournamentForm">

<h:panelGroup id="tournamentListPanel" layout="block" styleClass="Container100 ui-fluid">
	<div class="ContainerIndent">
		<div class="Card ShadowEffect">
		
			<h2 class="BigTopic">					
				<h:outputText value="#{bundle['tournaments']}"/>
			</h2>
						   
			<p:dataTable value="#{tournamentController.tournaments}"
						 var="tournament" emptyMessage="No tournaments found">
			    <p:column headerText="#{bundle['id']}">
			        <h:outputText value="#{tournament.id}" />
			    </p:column>
			 
			    <p:column headerText="#{bundle['name']}">
			        <h:outputText value="#{tournament.name}" />
			    </p:column>
			    
			      <p:column headerText="#{bundle['startDate']}">
			        <h:outputText value="#{tournament.startDate}" />
			    </p:column>
			    
			     <p:column headerText="#{bundle['maxPartCount']}">
			        <h:outputText value="#{tournament.maxPartCount}" />
			    </p:column>
			 
			</p:dataTable>					
						
		</div>
	</div>
</h:panelGroup>






<h:panelGroup id="tournamentCreatePanel" layout="block" styleClass="Container100 ui-fluid">
	<div class="ContainerIndent">
		<div class="Card ShadowEffect">						
		
			<p:messages id="infoErrorMessages" showDetail="true" autoUpdate="false" closable="true" globalOnly="true"/>
			
			<h2 class="BigTopic">					
				<h:outputText value="#{tournamentController.tournamentBean.id != null ? bundle['updateTournament'] : bundle['createTournament']}"/>&#160;					                 
			</h2>
			
			<div class="EmptyBox20"></div>
			<p:panelGrid id="tournamentPanel" columns="3" columnClasses="ui-grid-col-2,ui-grid-col-5,i-grid-col-5" layout="grid" styleClass="ui-panelgrid-blank" style="border:0px none; background-color:transparent;" >
             				
				<p:outputLabel for="name" value="#{bundle['name']}"/>
               		<p:inputText id="name" value="#{tournamentController.tournamentBean.name}" maxlength="30" tabindex="1"/>
               	<p:message for="name" />   
               	
               	<p:outputLabel for="startDate" value="#{bundle['startDate']}"/>
               		<p:calendar id="startDate" value="#{tournamentController.tournamentBean.startDate}" showOn="button" pattern="dd/MM/yyyy" tabindex="2"/>
               	<p:message for="startDate" />   
               	
               	<p:outputLabel for="maxCount" value="#{bundle['maxPartCount']}"/>
               		<p:inputText id="maxCount" value="#{tournamentController.tournamentBean.maxPartCount}" maxlength="30" tabindex="3"/>
               	<p:message for="maxCount" />  
           
               	
     		</p:panelGrid>
         	
         	<sec:ifAnyGranted roles="ROLE_ADMIN">
      		<div class="EmptyBox20"></div>
         		
      		<h:panelGroup id="buttonsPanel" layout="block">      			      			
          		<p:commandButton id="createTournament" actionListener="#{tournamentController.onCreateTournament}" 
          					     update="tournamentForm:tournamentCreatePanel, tournamentForm:tournamentListPanel"
                    			 value="#{bundle['create']}"                     			                      				
                    			 style="width:auto" 
                    			 icon="fa fa-plus Fs16 White"
                    			 rendered="#{tournamentController.tournamentBean.id == null}"/>
                    			 
               	
               	<p:commandButton id="updateTournamnet" actionListener="#{tournamentController.onUpdateTournament}" 
          					     update="tournamentUpdatePanel, tournamentListPanel"
                    			 value="#{bundle['update']}" 
                    			 styleClass="GreenButton"                     				 
                    			 style="width:auto" 
                    			 icon="fa fa-pencil Fs16 White"
                    			 rendered="#{tournamentController.tournamentBean.id != null}"/>
               	
                    				 
              	<p:commandButton actionListener="#{tournamentController.onCancel}" 
              				     update="tournamentCreatePanel"
              					 process="@this"
                				 value="Հերքել" 
                				 styleClass="RedButton"                     				 
                				 style="width:auto" icon="fa fa-ban Fs16 White"
                				 rendered="#{tournamentController.tournamentBean.id != null}"/>
                				             	
			</h:panelGroup>
			</sec:ifAnyGranted>						
						
		</div>
	</div>
</h:panelGroup>

</h:form>

        
</ui:define>

</ui:composition>